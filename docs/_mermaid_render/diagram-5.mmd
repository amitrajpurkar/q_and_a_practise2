flowchart TD
    Student[Student]
    CSV[(Question Bank CSV)]

    P1((1. Load question bank))
    P2((2. Start session))
    P3((3. Record answer))
    P4((4. Compute summary))

    D1[(In-memory Question Cache)]
    D2[(In-memory Sessions Store)]

    CSV --> P1
    P1 --> D1

    Student -->|topic, difficulty| P2
    D1 --> P2
    P2 --> D2
    P2 -->|first question| Student

    Student -->|chosen_option, question_id| P3
    D2 --> P3
    P3 --> D2
    P3 -->|feedback + next question OR finished flag| Student

    D2 --> P4
    P4 -->|summary + incorrect list| Student
